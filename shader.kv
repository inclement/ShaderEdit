#:import main main
#:import lexers pygments.lexers

<ShaderToy>:
    orientation: 'vertical'
    ActionBar:
    FloatLayout:
        ShaderDisplay:
            id: shaderdisplay
            size_hint: 1, 1
            fs: main.tunnel_shader
        EditBox:
            id: editbox
            slider_opacity: slider.value
            size_hint: 0.8, 0.8
            pos_hint: {'x': 0.1, 'y': 0.1}
            on_fs_text: shaderdisplay.fs = self.fs_text
        Slider:
            id: slider
            min: 0.0
            max: 1.0
            value: 0.5
            size_hint: None, 1
            width: sp(20)
            pos_hint: {'right': 0.99}
            orientation: 'vertical'

<EditBox>:
    orientation: 'vertical'
    fs_text: ti.text
    Label:
        canvas:
            Color:
                rgba: 0.1, 0.1, 0.1, root.slider_opacity
            Rectangle:
                size: self.size
                pos: self.pos
        size_hint_y: None
        height: sp(30)
        text: 'Code box label!'
        color: 1.0, 1.0, 1.0, 1.0
    CodeInput:
        id: ti
        text: main.tunnel_shader
        background_color: 1, 1, 1, root.slider_opacity
        lexer: lexers.GLShaderLexer()

<ShaderWidget>:
    canvas:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size