#:import main main
#:import lexers pygments.lexers

<ShaderIndex>:
    Label:
        text: 'head'

<ShaderManager>:
    Screen:
        name: 'index'
        ShaderIndex:
    Screen:
        name: 'editor'
        ShaderDisplay:
            

<EditBox>:
    orientation: 'vertical'
    fs_text: ti.text
    pos_hint: {'x': 0.06, 'y': self.height_pos_hint}
    size_hint: 0.88, 0.88
    Label:
        canvas:
            Color:
                rgba: 0.1, 0.1, 0.1, root.slider_opacity
            Rectangle:
                size: self.size
                pos: self.pos
        size_hint_y: None
        height: sp(30)
        text: 'Code box label!'
        color: 1.0, 1.0, 1.0, 1.0
    CodeInput:
        id: ti
        text: main.ripple_shader
        background_color: 1, 1, 1, root.slider_opacity
        lexer: lexers.GLShaderLexer()
        padding_x: sp(10)
        padding_y: sp(0)
        font_name: 'DroidSansMono.ttf'
        on_focus: root.keyboard_response(self.focus)

<ShaderWidget>:
    canvas:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

<ShaderToy>:
    orientation: 'vertical'
    actionbar: actionbar
    ShaderActionBar:
        id: actionbar
        editbox: editbox
    FloatLayout:
        ShaderDisplay:
            id: shaderdisplay
            size_hint: 1, 1
            fs: main.ripple_shader
        EditBox:
            id: editbox
            slider_opacity: slider.value
            on_fs_text: shaderdisplay.fs = self.fs_text
        Slider:
            id: slider
            min: 0.0
            max: 1.0
            value: 0.9
            size_hint: None, 1
            width: sp(20)
            pos_hint: {'right': 0.99}
            orientation: 'vertical'

<ShaderActionBar>:
    height: sp(40)
    ActionView:
        use_separator: True
        ActionPrevious:
            title: 'Shader Edit'
            with_previous: False
        ActionSeparator:
        ActionOverflow:
        ActionButton:
            text: 'Fullscreen'
            on_press: root.editbox.go_fullscreen()
        ActionSeparator:
        ActionButton:
            text: 'Save'
        ActionButton:
            text: 'Save As...'
